{
    "name": "Plex Leon - Development Container",
    "dockerComposeFile": "./compose.yml",
    "service": "devcontainer",
    "shutdownAction": "none",

    "remoteUser": "root",
    "workspaceFolder": "/workspace/",
    
    "postCreateCommand": "bash -lc 'poetry install && ln -snf \"$(poetry env info --path)\" .venv || true'",

    "customizations": {
        "vscode": {
            "extensions": [
                "ms-python.python",
                "ms-python.debugpy",
                "eamodio.gitlens",
                "gruntfuggly.todo-tree",
                "aaron-bond.better-comments",
                "usernamehw.errorlens"
            ],
            "settings": {
                "files.autoSave": "afterDelay",
                "files.autoSaveDelay": 1000,
                    "editor.formatOnSave": true,
                    // prefer the Poetry-created virtualenv (symlinked to .venv) as the interpreter
                    "python.defaultInterpreterPath": "/workspace/.venv/bin/python",
                    // ensure the language server analyses our src/ package
                    "python.analysis.extraPaths": ["./src"],
                    // automatically activate the selected environment in terminals
                    "python.terminal.activateEnvironment": true
            }
        }
    }
}
